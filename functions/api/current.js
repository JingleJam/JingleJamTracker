const points = JSON.stringify(getRawData([
    {
      "timestamp": "Dec 1, 17:00",
      "year": 2022,
      "amountPounds": "141",
      "amountDollars": "170.61"
    },
    {
      "timestamp": "Dec 1, 17:01",
      "year": 2022,
      "amountPounds": "6,043.01",
      "amountDollars": "7,312.04"
    },
    {
      "timestamp": "Dec 1, 17:02",
      "year": 2022,
      "amountPounds": "23,375.89",
      "amountDollars": "28,284.83"
    },
    {
      "timestamp": "Dec 1, 17:03",
      "year": 2022,
      "amountPounds": "52,838.85",
      "amountDollars": "63,935.01"
    },
    {
      "timestamp": "Dec 1, 17:04",
      "year": 2022,
      "amountPounds": "90,874.08",
      "amountDollars": "109,957.64"
    },
    {
      "timestamp": "Dec 1, 17:05",
      "year": 2022,
      "amountPounds": "132,545.56",
      "amountDollars": "160,380.13"
    },
    {
      "timestamp": "Dec 1, 17:06",
      "year": 2022,
      "amountPounds": "169,661.45",
      "amountDollars": "205,290.35"
    },
    {
      "timestamp": "Dec 1, 17:07",
      "year": 2022,
      "amountPounds": "197,797.16",
      "amountDollars": "239,334.56"
    },
    {
      "timestamp": "Dec 1, 17:09",
      "year": 2022,
      "amountPounds": "239,501.67",
      "amountDollars": "289,797.02"
    },
    {
      "timestamp": "Dec 1, 17:10",
      "year": 2022,
      "amountPounds": "252,832.17",
      "amountDollars": "305,926.93"
    },
    {
      "timestamp": "Dec 1, 17:12",
      "year": 2022,
      "amountPounds": "279,184.22",
      "amountDollars": "337,812.91"
    },
    {
      "timestamp": "Dec 1, 17:13",
      "year": 2022,
      "amountPounds": "289,098.51",
      "amountDollars": "349,809.20"
    },
    {
      "timestamp": "Dec 1, 17:14",
      "year": 2022,
      "amountPounds": "297,583.36",
      "amountDollars": "360,075.87"
    },
    {
      "timestamp": "Dec 1, 17:18",
      "year": 2022,
      "amountPounds": "326,239.99",
      "amountDollars": "394,750.39"
    },
    {
      "timestamp": "Dec 1, 17:23",
      "year": 2022,
      "amountPounds": "350,371.53",
      "amountDollars": "423,949.55"
    },
    {
      "timestamp": "Dec 1, 17:28",
      "year": 2022,
      "amountPounds": "368,424.41",
      "amountDollars": "445,793.54"
    },
    {
      "timestamp": "Dec 1, 17:30",
      "year": 2022,
      "amountPounds": "376,199.59",
      "amountDollars": "455,201.50"
    },
    {
      "timestamp": "Dec 1, 17:31",
      "year": 2022,
      "amountPounds": "378,521.59",
      "amountDollars": "458,011.12"
    },
    {
      "timestamp": "Dec 1, 17:35",
      "year": 2022,
      "amountPounds": "391,468.80",
      "amountDollars": "473,677.25"
    },
    {
      "timestamp": "Dec 1, 17:36",
      "year": 2022,
      "amountPounds": "393,673.80",
      "amountDollars": "476,345.30"
    },
    {
      "timestamp": "Dec 1, 17:37",
      "year": 2022,
      "amountPounds": "396,838.80",
      "amountDollars": "480,174.95"
    },
    {
      "timestamp": "Dec 1, 17:38",
      "year": 2022,
      "amountPounds": "399,557.80",
      "amountDollars": "483,464.94"
    },
    {
      "timestamp": "Dec 1, 17:39",
      "year": 2022,
      "amountPounds": "402,079.80",
      "amountDollars": "486,516.56"
    },
    {
      "timestamp": "Dec 1, 17:40",
      "year": 2022,
      "amountPounds": "404,073.30",
      "amountDollars": "488,928.69"
    },
    {
      "timestamp": "Dec 1, 17:41",
      "year": 2022,
      "amountPounds": "406,163.30",
      "amountDollars": "491,457.59"
    },
    {
      "timestamp": "Dec 1, 17:42",
      "year": 2022,
      "amountPounds": "408,465.57",
      "amountDollars": "494,243.34"
    },
    {
      "timestamp": "Dec 1, 17:43",
      "year": 2022,
      "amountPounds": "410,442.18",
      "amountDollars": "496,635.04"
    },
    {
      "timestamp": "Dec 1, 17:45",
      "year": 2022,
      "amountPounds": "416,638.55",
      "amountDollars": "504,132.65"
    },
    {
      "timestamp": "Dec 1, 17:47",
      "year": 2022,
      "amountPounds": "424,117.37",
      "amountDollars": "513,182.02"
    },
    {
      "timestamp": "Dec 1, 17:48",
      "year": 2022,
      "amountPounds": "426,923.18",
      "amountDollars": "516,577.05"
    },
    {
      "timestamp": "Dec 1, 17:49",
      "year": 2022,
      "amountPounds": "429,373.18",
      "amountDollars": "519,541.55"
    },
    {
      "timestamp": "Dec 1, 17:50",
      "year": 2022,
      "amountPounds": "431,683.18",
      "amountDollars": "522,336.65"
    },
    {
      "timestamp": "Dec 1, 17:51",
      "year": 2022,
      "amountPounds": "434,553.18",
      "amountDollars": "525,809.35"
    },
    {
      "timestamp": "Dec 1, 17:52",
      "year": 2022,
      "amountPounds": "436,516.87",
      "amountDollars": "528,185.41"
    },
    {
      "timestamp": "Dec 1, 17:53",
      "year": 2022,
      "amountPounds": "438,827.56",
      "amountDollars": "530,981.35"
    },
    {
      "timestamp": "Dec 1, 17:54",
      "year": 2022,
      "amountPounds": "440,702.56",
      "amountDollars": "533,250.10"
    },
    {
      "timestamp": "Dec 1, 17:55",
      "year": 2022,
      "amountPounds": "442,527.56",
      "amountDollars": "535,458.35"
    },
    {
      "timestamp": "Dec 1, 17:56",
      "year": 2022,
      "amountPounds": "444,522.56",
      "amountDollars": "537,872.30"
    },
    {
      "timestamp": "Dec 1, 17:57",
      "year": 2022,
      "amountPounds": "446,730.56",
      "amountDollars": "540,543.98"
    },
    {
      "timestamp": "Dec 1, 17:58",
      "year": 2022,
      "amountPounds": "449,380.88",
      "amountDollars": "543,750.86"
    },
    {
      "timestamp": "Dec 1, 17:59",
      "year": 2022,
      "amountPounds": "451,422.88",
      "amountDollars": "546,221.68"
    },
    {
      "timestamp": "Dec 1, 18:00",
      "year": 2022,
      "amountPounds": "453,602.88",
      "amountDollars": "548,859.48"
    },
    {
      "timestamp": "Dec 1, 18:01",
      "year": 2022,
      "amountPounds": "456,477.88",
      "amountDollars": "552,338.23"
    },
    {
      "timestamp": "Dec 1, 18:02",
      "year": 2022,
      "amountPounds": "458,105.96",
      "amountDollars": "554,308.21"
    },
    {
      "timestamp": "Dec 1, 18:03",
      "year": 2022,
      "amountPounds": "460,025.96",
      "amountDollars": "556,631.41"
    },
    {
      "timestamp": "Dec 1, 18:04",
      "year": 2022,
      "amountPounds": "461,670.96",
      "amountDollars": "558,621.86"
    },
    {
      "timestamp": "Dec 1, 18:05",
      "year": 2022,
      "amountPounds": "463,693.96",
      "amountDollars": "561,069.69"
    },
    {
      "timestamp": "Dec 1, 18:06",
      "year": 2022,
      "amountPounds": "465,306.81",
      "amountDollars": "563,021.24"
    },
    {
      "timestamp": "Dec 1, 18:07",
      "year": 2022,
      "amountPounds": "466,981.81",
      "amountDollars": "565,047.99"
    },
    {
      "timestamp": "Dec 1, 18:08",
      "year": 2022,
      "amountPounds": "468,671.81",
      "amountDollars": "567,092.89"
    },
    {
      "timestamp": "Dec 1, 18:09",
      "year": 2022,
      "amountPounds": "470,335.81",
      "amountDollars": "569,106.33"
    },
    {
      "timestamp": "Dec 1, 18:10",
      "year": 2022,
      "amountPounds": "472,050.81",
      "amountDollars": "571,181.48"
    },
    {
      "timestamp": "Dec 1, 18:11",
      "year": 2022,
      "amountPounds": "473,570.81",
      "amountDollars": "573,020.68"
    },
    {
      "timestamp": "Dec 1, 18:12",
      "year": 2022,
      "amountPounds": "476,247.83",
      "amountDollars": "576,259.87"
    },
    {
      "timestamp": "Dec 1, 18:13",
      "year": 2022,
      "amountPounds": "478,452.83",
      "amountDollars": "578,927.92"
    },
    {
      "timestamp": "Dec 1, 18:14",
      "year": 2022,
      "amountPounds": "480,947.83",
      "amountDollars": "581,946.87"
    },
    {
      "timestamp": "Dec 1, 18:15",
      "year": 2022,
      "amountPounds": "484,074.83",
      "amountDollars": "585,730.54"
    },
    {
      "timestamp": "Dec 1, 18:16",
      "year": 2022,
      "amountPounds": "487,502.20",
      "amountDollars": "589,877.66"
    },
    {
      "timestamp": "Dec 1, 18:30",
      "year": 2022,
      "amountPounds": "517,561.29",
      "amountDollars": "626,249.16"
    },
    {
      "timestamp": "Dec 1, 18:40",
      "year": 2022,
      "amountPounds": "537,997.98",
      "amountDollars": "650,977.56"
    },
    {
      "timestamp": "Dec 1, 18:50",
      "year": 2022,
      "amountPounds": "554,798.35",
      "amountDollars": "671,306.00"
    },
    {
      "timestamp": "Dec 1, 19:00",
      "year": 2022,
      "amountPounds": "571,870.01",
      "amountDollars": "691,962.71"
    },
    {
      "timestamp": "Dec 1, 19:10",
      "year": 2022,
      "amountPounds": "586,612.57",
      "amountDollars": "709,801.21"
    },
    {
      "timestamp": "Dec 1, 19:20",
      "year": 2022,
      "amountPounds": "601,455.09",
      "amountDollars": "727,760.66"
    },
    {
      "timestamp": "Dec 1, 19:30",
      "year": 2022,
      "amountPounds": "615,778.71",
      "amountDollars": "745,092.24"
    },
    {
      "timestamp": "Dec 1, 19:40",
      "year": 2022,
      "amountPounds": "627,103.36",
      "amountDollars": "758,795.07"
    },
    {
      "timestamp": "Dec 1, 19:50",
      "year": 2022,
      "amountPounds": "639,643.71",
      "amountDollars": "773,968.89"
    },
    {
      "timestamp": "Dec 1, 20:00",
      "year": 2022,
      "amountPounds": "652,686.24",
      "amountDollars": "789,750.35"
    },
    {
      "timestamp": "Dec 1, 20:10",
      "year": 2022,
      "amountPounds": "667,425.02",
      "amountDollars": "807,584.27"
    },
    {
      "timestamp": "Dec 1, 20:20",
      "year": 2022,
      "amountPounds": "680,592.72",
      "amountDollars": "823,517.19"
    }
   ]));
  
function getRawData(list){
    for(let row of list){
        row.amountPounds = parseFloat(row.amountPounds.replace('"', '').replace(',', '').replace('$', '').replace('£', ''));
        row.amountDollars = parseFloat(row.amountDollars.replace('"', '').replace(',', '').replace('$', '').replace('£', ''));
    }

    return list;
}

export function onRequest(context) {
    if (context.request.method !== "GET" && context.request.method !== "HEAD") {
        return new Response(null,  {
            status: 204,
            headers: {
            "content-type": "application/json;charset=UTF-8",
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS',
            'Access-Control-Max-Age': '86400',
            'Allow': 'GET, HEAD, OPTIONS'
            }
        });
    }
  
    return new Response(points,
      {
        headers: {
          "content-type": "application/json;charset=UTF-8",
          'Access-Control-Allow-Origin': '*',
          'Access-Control-Allow-Methods': 'GET, HEAD, OPTIONS',
          'Access-Control-Max-Age': '86400',
          'Allow': 'GET, HEAD, OPTIONS',
          'Vary': 'Origin'
        }
      });
  }
     